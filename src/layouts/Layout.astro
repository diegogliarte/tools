---
import "@styles/global.css";
import Breadcrumbs from "@components/Breadcrumbs.astro";
import {findCategoryTitle, findToolTitle} from "@lib/discover-tools";
import Toast from "@components/Toast.astro";
import Button from "../components/Button.astro";
const {title} = Astro.props

// auto-generate breadcrumbs from current path
const path = Astro.url.pathname; // e.g. "/IRL/my-tool"
const segments = path.split("/").filter(Boolean); // ["IRL","my-tool"]

let breadcrumbItems: { label: string; href?: string }[] = [{label: "Home", href: "/"}];

if (segments.length > 0) {
    const categorySlug = segments[0];
    breadcrumbItems.push({
        label: findCategoryTitle(categorySlug) ?? categorySlug,
        href: `/${categorySlug}`,
    });
}

if (segments.length > 1) {
    const toolSlug = segments[1];
    breadcrumbItems.push({
        label: findToolTitle(segments[0], toolSlug) ?? toolSlug,
    });
}
---
<!doctype html>
<html lang="en" class="bg-neutral-950 text-neutral-200">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width"/>
    <meta name="generator" content={Astro.generator}/>
    <title>{title ? `${title} | Tools` : "Tools"}</title>
    <!-- Standard favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

    <!-- Apple devices -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <!-- ICO fallback for older browsers -->
    <link rel="icon" href="/favicon.ico" />

    <link rel="sitemap" href="/sitemap-index.xml" />

</head>
        <body class="min-h-screen flex flex-col">
        <main class="flex-1 space-y-6 px-6">
            {breadcrumbItems.length > 0 && (
                    <div class="border-b border-neutral-600 meta-ui">
                        <div class="max-w-5xl mx-auto py-3">
                            <Breadcrumbs items={breadcrumbItems}/>
                        </div>
                    </div>
            )}

            <div class="max-w-5xl mx-auto">
                <slot/>
            </div>
            <Toast/>
        </main>
        <footer class="p-4 text-center text-xs text-neutral-500 meta-ui">
            <div class="flex flex-col items-center justify-center gap-3">
                <Button
                        href="https://ko-fi.com/diegogliarte"
                        target="_blank"
                        variant="primary"
                        size="xs"
                        title="Buy me a coffee on Ko-fi"
                >
                    <img
                            src="https://storage.ko-fi.com/cdn/cup-border.png"
                            alt="Ko-fi"
                            class="w-3 h-3"
                    />
                    <span>Buy me a coffee</span>
                </Button>
                <span>
                  Â© {new Date().getFullYear()} by
                  <a
                          href="https://github.com/diegogliarte"
                          target="_blank"
                          rel="noreferrer"
                          class="text-violet-400 hover:underline"
                  >
                    diegogliarte
                  </a>
                </span>
            </div>
        </footer>


        </body>
        </html>
